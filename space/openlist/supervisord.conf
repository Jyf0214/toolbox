[supervisord]
nodaemon=true
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid

[program:openlist]
# 使用新的启动命令
command=openlist server
# 在 appuser 的主目录下运行
directory=/home/appuser
autostart=true
autorestart=true
# 仍然使用非 root 用户运行，更安全
user=appuser
redirect_stderr=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0

[program:status-page]
command=python3 /app/status_app.py
directory=/app
autostart=true
autorestart=true
user=appuser
redirect_stderr=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0

[program:frpc]
command=/opt/frpc/frpc -u %(ENV_FRPC_SECRET_KEY)s -p 201696
directory=/opt/frpc
autostart=true
autorestart=true
# frpc 仍然以 root 运行，确保网络权限
user=root
redirect_stderr=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0